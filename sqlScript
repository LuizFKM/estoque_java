CREATE TABLE usuario(
	id SERIAL PRIMARY KEY,
	nome VARCHAR(100) NOT NULL,
	email VARCHAR(100) UNIQUE NOT NULL,
	senha VARCHAR(100) NOT NULL,
	role VARCHAR(20) CHECK (role in ('ADMIN', 'COLABORADOR'))

);

CREATE ROLE admin LOGIN PASSWORD 'admin123';

GRANT ALL PRIVILEGES ON DATABASE db_estoque TO admin;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO admin;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO admin;

CREATE ROLE colaborador LOGIN PASSWORD 'colabora123';
GRANT SELECT,INSERT,UPDATE ON categoria TO colaborador;
GRANT SELECT, INSERT, UPDATE ON produto TO colaborador;
GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO colaborador;
REVOKE DELETE ON categoria FROM colaborador;
REVOKE DELETE ON produto FROM colaborador;